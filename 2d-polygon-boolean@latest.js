!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).dPolygonBoolean=t()}}((function(){return function t(e,r,n){function i(f,u){if(!r[f]){if(!e[f]){var l="function"==typeof require&&require;if(!u&&l)return l(f,!0);if(o)return o(f,!0);var h=new Error("Cannot find module '"+f+"'");throw h.code="MODULE_NOT_FOUND",h}var s=r[f]={exports:{}};e[f][0].call(s.exports,(function(t){return i(e[f][1][t]||t)}),s,s.exports,t,e,r,n)}return r[f].exports}for(var o="function"==typeof require&&require,f=0;f<n.length;f++)i(n[f]);return i}({1:[function(t,e,r){var n=t("segseg"),i=t("point-in-big-polygon"),o=t("2d-polygon-area"),f=t("signum"),u=Math.abs;function l(t){for(var e=t.length,r=new Array(e),n=0;n<e;n++)r[n]=t[n].slice();return r}function h(t,e,r){this.vec=t,this.alpha=e||0,this.intersect=!!r}function s(t){for(var e,r,n=t.length,i=0;i<n;i++){var o=t[i];e?(r.next=new h(o),r.next.prev=r,r=r.next):r=e=new h(o)}return e}function a(t,e){var r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}function c(t){for(var e=t.length-1;e--;){var r=t[e],n=t[e+1];r[0]===n[0]&&r[1]===n[1]&&t.splice(e,1)}return t}h.prototype={vec:null,next:null,next:null,prev:null,nextPoly:null,neighbor:null,intersect:null,entry:null,visited:!1,alpha:0,nextNonIntersection:function(){for(var t=this;t&&t.intersect;)t=t.next;return t},last:function(){for(var t=this;t.next&&t.next!==this;)t=t.next;return t},createLoop:function(){var t=this.last();t.prev.next=this,this.prev=t.prev},firstNodeOfInterest:function(){var t=this;if(t)do{t=t.next}while(t!==this&&(!t.intersect||t.intersect&&t.visited));return t},insertBetween:function(t,e){for(var r=t;r!==e&&r.alpha<this.alpha;)r=r.next;this.next=r,this.prev=r.prev,this.prev&&(this.prev.next=this),this.next.prev=this}},e.exports=function(t,e,r){var g,v=s(t),p=s(e),_=i([e]),d=i([t]);if(function(t,e){var r,i,o=t.last();o.next=new h(t.vec,o),o.next.prev=o;var f=e.last();f.next=new h(e.vec,f),f.next.prev=f;var u=!1;for(r=t;r.next;r=r.next)if(!r.intersect)for(i=e;i.next;i=i.next)if(!i.intersect){var l=r.vec,s=r.next.nextNonIntersection().vec,c=i.vec,g=i.next.nextNonIntersection().vec,v=n(l,s,c,g);if(v&&!0!==v){u=!0;var p=new h(v,a(l,v)/a(l,s),!0),_=new h(v,a(c,v)/a(c,g),!0);p.neighbor=_,_.neighbor=p,p.insertBetween(r,r.next.nextNonIntersection()),_.insertBetween(i,i.next.nextNonIntersection())}}return u}(v,p))!function(t,e,r,n,i){var o,f,u=r(t.vec)<0;for("and"===i&&(u=!u),o=t;o.next;o=o.next)o.intersect&&(o.entry=u,u=!u);var l=n(e.vec)>0;for("or"===i&&(l=!l),f=e;f.next;f=f.next)f.intersect&&(f.entry=l,l=!l)}(v,p,_,d,r),g=function(t,e){t.createLoop(),e.createLoop();for(var r,n,i=[];(r=t.firstNodeOfInterest())!==t;){for(n=[];!r.visited;r=r.neighbor){n.push(r.vec);for(var o=r.entry;;){if(r.visited=!0,(r=o?r.next:r.prev).intersect){r.visited=!0;break}n.push(r.vec)}}i.push(c(n))}return i}(v,p);else{var y=_(t[0])<0,x=d(e[0])<0;switch(g=[],r){case"or":y||x?y?g.push(l(e)):x&&g.push(l(t)):(g.push(l(t)),g.push(l(e)));break;case"and":if(y)g.push(l(t));else{if(!x)throw new Error("woops");g.push(l(e))}break;case"not":var w=l(t),b=l(e),m=o(w),k=o(b);f(m)===f(k)&&(x?b.reverse():y&&w.reverse()),g.push(w),u(m)>u(k)?g.push(b):g.unshift(b)}}return g}},{"2d-polygon-area":2,"point-in-big-polygon":5,segseg:10,signum:11}],2:[function(t,e,r){e.exports=function(t){for(var e=0,r=t[0],o=t.length,f=2;f<o;f++){var u=t[f-1],l=t[f];n[0]=r[0]-l[0],n[1]=r[1]-l[1],i[0]=r[0]-u[0],i[1]=r[1]-u[1],e+=n[0]*i[1]-n[1]*i[0]}return e/2};var n=[0,0],i=[0,0]},{}],3:[function(t,e,r){"use strict";function n(t,e,r,n,i,o){var f=["function ",t,"(a,l,h,",n.join(","),"){",o?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",i?".get(m)":"[m]"];return o?e.indexOf("c")<0?f.push(";if(x===y){return m}else if(x<=y){"):f.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):f.push(";if(",e,"){i=m;"),r?f.push("l=m+1}else{h=m-1}"):f.push("h=m-1}else{l=m+1}"),f.push("}"),o?f.push("return -1};"):f.push("return i};"),f.join("")}function i(t,e,r,i){return new Function([n("A","x"+t+"y",e,["y"],!1,i),n("B","x"+t+"y",e,["y"],!0,i),n("P","c(x,y)"+t+"0",e,["y","c"],!1,i),n("Q","c(x,y)"+t+"0",e,["y","c"],!0,i),"function dispatchBsearch",r,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",r].join(""))()}e.exports={ge:i(">=",!1,"GE"),gt:i(">",!1,"GT"),lt:i("<",!0,"LT"),le:i("<=",!0,"LE"),eq:i("-",!0,"EQ",!0)}},{}],4:[function(t,e,r){"use strict";e.exports=function(t){return new h(t||d,null)};var n=0,i=1;function o(t,e,r,n,i,o){this._color=t,this.key=e,this.value=r,this.left=n,this.right=i,this._count=o}function f(t){return new o(t._color,t.key,t.value,t.left,t.right,t._count)}function u(t,e){return new o(t,e.key,e.value,e.left,e.right,e._count)}function l(t){t._count=1+(t.left?t.left._count:0)+(t.right?t.right._count:0)}function h(t,e){this._compare=t,this.root=e}var s=h.prototype;function a(t,e){var r;if(e.left&&(r=a(t,e.left)))return r;return(r=t(e.key,e.value))||(e.right?a(t,e.right):void 0)}function c(t,e,r,n){if(e(t,n.key)<=0){var i;if(n.left)if(i=c(t,e,r,n.left))return i;if(i=r(n.key,n.value))return i}if(n.right)return c(t,e,r,n.right)}function g(t,e,r,n,i){var o,f=r(t,i.key),u=r(e,i.key);if(f<=0){if(i.left&&(o=g(t,e,r,n,i.left)))return o;if(u>0&&(o=n(i.key,i.value)))return o}if(u>0&&i.right)return g(t,e,r,n,i.right)}function v(t,e){this.tree=t,this._stack=e}Object.defineProperty(s,"keys",{get:function(){var t=[];return this.forEach((function(e,r){t.push(e)})),t}}),Object.defineProperty(s,"values",{get:function(){var t=[];return this.forEach((function(e,r){t.push(r)})),t}}),Object.defineProperty(s,"length",{get:function(){return this.root?this.root._count:0}}),s.insert=function(t,e){for(var r=this._compare,f=this.root,s=[],a=[];f;){var c=r(t,f.key);s.push(f),a.push(c),f=c<=0?f.left:f.right}s.push(new o(n,t,e,null,null,1));for(var g=s.length-2;g>=0;--g){f=s[g];a[g]<=0?s[g]=new o(f._color,f.key,f.value,s[g+1],f.right,f._count+1):s[g]=new o(f._color,f.key,f.value,f.left,s[g+1],f._count+1)}for(g=s.length-1;g>1;--g){var v=s[g-1];f=s[g];if(v._color===i||f._color===i)break;var p=s[g-2];if(p.left===v)if(v.left===f){if(!(_=p.right)||_._color!==n){if(p._color=n,p.left=v.right,v._color=i,v.right=p,s[g-2]=v,s[g-1]=f,l(p),l(v),g>=3)(d=s[g-3]).left===p?d.left=v:d.right=v;break}v._color=i,p.right=u(i,_),p._color=n,g-=1}else{if(!(_=p.right)||_._color!==n){if(v.right=f.left,p._color=n,p.left=f.right,f._color=i,f.left=v,f.right=p,s[g-2]=f,s[g-1]=v,l(p),l(v),l(f),g>=3)(d=s[g-3]).left===p?d.left=f:d.right=f;break}v._color=i,p.right=u(i,_),p._color=n,g-=1}else if(v.right===f){if(!(_=p.left)||_._color!==n){if(p._color=n,p.right=v.left,v._color=i,v.left=p,s[g-2]=v,s[g-1]=f,l(p),l(v),g>=3)(d=s[g-3]).right===p?d.right=v:d.left=v;break}v._color=i,p.left=u(i,_),p._color=n,g-=1}else{var _;if(!(_=p.left)||_._color!==n){var d;if(v.left=f.right,p._color=n,p.right=f.left,f._color=i,f.right=v,f.left=p,s[g-2]=f,s[g-1]=v,l(p),l(v),l(f),g>=3)(d=s[g-3]).right===p?d.right=f:d.left=f;break}v._color=i,p.left=u(i,_),p._color=n,g-=1}}return s[0]._color=i,new h(r,s[0])},s.forEach=function(t,e,r){if(this.root)switch(arguments.length){case 1:return a(t,this.root);case 2:return c(e,this._compare,t,this.root);case 3:if(this._compare(e,r)>=0)return;return g(e,r,this._compare,t,this.root)}},Object.defineProperty(s,"begin",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.left;return new v(this,t)}}),Object.defineProperty(s,"end",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.right;return new v(this,t)}}),s.at=function(t){if(t<0)return new v(this,[]);for(var e=this.root,r=[];;){if(r.push(e),e.left){if(t<e.left._count){e=e.left;continue}t-=e.left._count}if(!t)return new v(this,r);if(t-=1,!e.right)break;if(t>=e.right._count)break;e=e.right}return new v(this,[])},s.ge=function(t){for(var e=this._compare,r=this.root,n=[],i=0;r;){var o=e(t,r.key);n.push(r),o<=0&&(i=n.length),r=o<=0?r.left:r.right}return n.length=i,new v(this,n)},s.gt=function(t){for(var e=this._compare,r=this.root,n=[],i=0;r;){var o=e(t,r.key);n.push(r),o<0&&(i=n.length),r=o<0?r.left:r.right}return n.length=i,new v(this,n)},s.lt=function(t){for(var e=this._compare,r=this.root,n=[],i=0;r;){var o=e(t,r.key);n.push(r),o>0&&(i=n.length),r=o<=0?r.left:r.right}return n.length=i,new v(this,n)},s.le=function(t){for(var e=this._compare,r=this.root,n=[],i=0;r;){var o=e(t,r.key);n.push(r),o>=0&&(i=n.length),r=o<0?r.left:r.right}return n.length=i,new v(this,n)},s.find=function(t){for(var e=this._compare,r=this.root,n=[];r;){var i=e(t,r.key);if(n.push(r),0===i)return new v(this,n);r=i<=0?r.left:r.right}return new v(this,[])},s.remove=function(t){var e=this.find(t);return e?e.remove():this},s.get=function(t){for(var e=this._compare,r=this.root;r;){var n=e(t,r.key);if(0===n)return r.value;r=n<=0?r.left:r.right}};var p=v.prototype;function _(t,e){t.key=e.key,t.value=e.value,t.left=e.left,t.right=e.right,t._color=e._color,t._count=e._count}function d(t,e){return t<e?-1:t>e?1:0}Object.defineProperty(p,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(p,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),p.clone=function(){return new v(this.tree,this._stack.slice())},p.remove=function(){var t=this._stack;if(0===t.length)return this.tree;var e=new Array(t.length),r=t[t.length-1];e[e.length-1]=new o(r._color,r.key,r.value,r.left,r.right,r._count);for(var s=t.length-2;s>=0;--s){(r=t[s]).left===t[s+1]?e[s]=new o(r._color,r.key,r.value,e[s+1],r.right,r._count):e[s]=new o(r._color,r.key,r.value,r.left,e[s+1],r._count)}if((r=e[e.length-1]).left&&r.right){var a=e.length;for(r=r.left;r.right;)e.push(r),r=r.right;var c=e[a-1];e.push(new o(r._color,c.key,c.value,r.left,r.right,r._count)),e[a-1].key=r.key,e[a-1].value=r.value;for(s=e.length-2;s>=a;--s)r=e[s],e[s]=new o(r._color,r.key,r.value,r.left,e[s+1],r._count);e[a-1].left=e[a]}if((r=e[e.length-1])._color===n){var g=e[e.length-2];g.left===r?g.left=null:g.right===r&&(g.right=null),e.pop();for(s=0;s<e.length;++s)e[s]._count--;return new h(this.tree._compare,e[0])}if(r.left||r.right){r.left?_(r,r.left):r.right&&_(r,r.right),r._color=i;for(s=0;s<e.length-1;++s)e[s]._count--;return new h(this.tree._compare,e[0])}if(1===e.length)return new h(this.tree._compare,null);for(s=0;s<e.length;++s)e[s]._count--;var v=e[e.length-2];return function(t){for(var e,r,o,h,s=t.length-1;s>=0;--s){if(e=t[s],0===s)return void(e._color=i);if((r=t[s-1]).left===e){if((o=r.right).right&&o.right._color===n){if(h=(o=r.right=f(o)).right=f(o.right),r.right=o.left,o.left=r,o.right=h,o._color=r._color,e._color=i,r._color=i,h._color=i,l(r),l(o),s>1)(a=t[s-2]).left===r?a.left=o:a.right=o;return void(t[s-1]=o)}if(o.left&&o.left._color===n){if(h=(o=r.right=f(o)).left=f(o.left),r.right=h.left,o.left=h.right,h.left=r,h.right=o,h._color=r._color,r._color=i,o._color=i,e._color=i,l(r),l(o),l(h),s>1)(a=t[s-2]).left===r?a.left=h:a.right=h;return void(t[s-1]=h)}if(o._color===i){if(r._color===n)return r._color=i,void(r.right=u(n,o));r.right=u(n,o);continue}o=f(o),r.right=o.left,o.left=r,o._color=r._color,r._color=n,l(r),l(o),s>1&&((a=t[s-2]).left===r?a.left=o:a.right=o),t[s-1]=o,t[s]=r,s+1<t.length?t[s+1]=e:t.push(e),s+=2}else{if((o=r.left).left&&o.left._color===n){if(h=(o=r.left=f(o)).left=f(o.left),r.left=o.right,o.right=r,o.left=h,o._color=r._color,e._color=i,r._color=i,h._color=i,l(r),l(o),s>1)(a=t[s-2]).right===r?a.right=o:a.left=o;return void(t[s-1]=o)}if(o.right&&o.right._color===n){if(h=(o=r.left=f(o)).right=f(o.right),r.left=h.right,o.right=h.left,h.right=r,h.left=o,h._color=r._color,r._color=i,o._color=i,e._color=i,l(r),l(o),l(h),s>1)(a=t[s-2]).right===r?a.right=h:a.left=h;return void(t[s-1]=h)}if(o._color===i){if(r._color===n)return r._color=i,void(r.left=u(n,o));r.left=u(n,o);continue}var a;o=f(o),r.left=o.right,o.right=r,o._color=r._color,r._color=n,l(r),l(o),s>1&&((a=t[s-2]).right===r?a.right=o:a.left=o),t[s-1]=o,t[s]=r,s+1<t.length?t[s+1]=e:t.push(e),s+=2}}}(e),v.left===r?v.left=null:v.right=null,new h(this.tree._compare,e[0])},Object.defineProperty(p,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(p,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(p,"index",{get:function(){var t=0,e=this._stack;if(0===e.length){var r=this.tree.root;return r?r._count:0}e[e.length-1].left&&(t=e[e.length-1].left._count);for(var n=e.length-2;n>=0;--n)e[n+1]===e[n].right&&(++t,e[n].left&&(t+=e[n].left._count));return t},enumerable:!0}),p.next=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.right)for(e=e.right;e;)t.push(e),e=e.left;else for(t.pop();t.length>0&&t[t.length-1].right===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(p,"hasNext",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].right)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].left===t[e])return!0;return!1}}),p.update=function(t){var e=this._stack;if(0===e.length)throw new Error("Can't update empty node!");var r=new Array(e.length),n=e[e.length-1];r[r.length-1]=new o(n._color,n.key,t,n.left,n.right,n._count);for(var i=e.length-2;i>=0;--i)(n=e[i]).left===e[i+1]?r[i]=new o(n._color,n.key,n.value,r[i+1],n.right,n._count):r[i]=new o(n._color,n.key,n.value,n.left,r[i+1],n._count);return new h(this.tree._compare,r[0])},p.prev=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.left)for(e=e.left;e;)t.push(e),e=e.right;else for(t.pop();t.length>0&&t[t.length-1].left===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(p,"hasPrev",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].left)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].right===t[e])return!0;return!1}})},{}],5:[function(t,e,r){"use strict";e.exports=function(t,e){e=!!e;for(var r=t.length,f=0,u=0;u<r;++u)f+=t[u].length;if(0===f)return o;var l=new Array(f),h=0;for(u=0;u<r;++u)for(var s=t[u],a=s.length,c=a-1,g=0;g<a;c=g++)l[h++]=[s[c],s[g]];var v,p=i(l),_=p.slabs[0];if(_){for(;_.left;)_=_.left;var d=_.key;v=d[0][0]<d[1][0]?-1:1}else{d=l[p.horizontal[0][0].index];v=d[0][1]<d[1][1]?1:-1}e&&(v=-v);return function(t,e,r,i){return function(o){var f=e.castUp(o);if(f<0)return r;var u=t[f];return i?n(o,u[1],u[0]):n(o,u[0],u[1])}}(l,p,v,e)};var n=t("robust-orientation"),i=t("slab-decomposition");function o(t){return-1}},{"robust-orientation":6,"slab-decomposition":13}],6:[function(t,e,r){"use strict";var n=t("two-product"),i=t("robust-sum"),o=t("robust-scale"),f=t("robust-subtract"),u=5;function l(t,e){for(var r=new Array(t.length-1),n=1;n<t.length;++n)for(var i=r[n-1]=new Array(t.length-1),o=0,f=0;o<t.length;++o)o!==e&&(i[f++]=t[n][o]);return r}function h(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",h(t.slice(0,e)),",",h(t.slice(e)),")"].join("")}function s(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],r=0;r<t.length;++r)e.push(["scale(",h(s(l(t,r))),",",(n=r,1&n?"-":""),t[0][r],")"].join(""));return e;var n}function a(t){for(var e=[],r=[],u=function(t){for(var e=new Array(t),r=0;r<t;++r){e[r]=new Array(t);for(var n=0;n<t;++n)e[r][n]=["m",n,"[",t-r-1,"]"].join("")}return e}(t),a=[],c=0;c<t;++c)0==(1&c)?e.push.apply(e,s(l(u,c))):r.push.apply(r,s(l(u,c))),a.push("m"+c);var g=h(e),v=h(r),p="orientation"+t+"Exact",_=["function ",p,"(",a.join(),"){var p=",g,",n=",v,",d=sub(p,n);return d[d.length-1];};return ",p].join("");return new Function("sum","prod","scale","sub",_)(i,n,o,f)}var c=a(3),g=a(4),v=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,r){var n,i=(t[1]-r[1])*(e[0]-r[0]),o=(t[0]-r[0])*(e[1]-r[1]),f=i-o;if(i>0){if(o<=0)return f;n=i+o}else{if(!(i<0))return f;if(o>=0)return f;n=-(i+o)}var u=33306690738754716e-32*n;return f>=u||f<=-u?f:c(t,e,r)},function(t,e,r,n){var i=t[0]-n[0],o=e[0]-n[0],f=r[0]-n[0],u=t[1]-n[1],l=e[1]-n[1],h=r[1]-n[1],s=t[2]-n[2],a=e[2]-n[2],c=r[2]-n[2],v=o*h,p=f*l,_=f*u,d=i*h,y=i*l,x=o*u,w=s*(v-p)+a*(_-d)+c*(y-x),b=7771561172376103e-31*((Math.abs(v)+Math.abs(p))*Math.abs(s)+(Math.abs(_)+Math.abs(d))*Math.abs(a)+(Math.abs(y)+Math.abs(x))*Math.abs(c));return w>b||-w>b?w:g(t,e,r,n)}];function p(t){var e=v[t.length];return e||(e=v[t.length]=a(t.length)),e.apply(void 0,t)}!function(){for(;v.length<=u;)v.push(a(v.length));for(var t=[],r=["slow"],n=0;n<=u;++n)t.push("a"+n),r.push("o"+n);var i=["function getOrientation(",t.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(n=2;n<=u;++n)i.push("case ",n,":return o",n,"(",t.slice(0,n).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),r.push(i.join(""));var o=Function.apply(void 0,r);for(e.exports=o.apply(void 0,[p].concat(v)),n=0;n<=u;++n)e.exports[n]=v[n]}()},{"robust-scale":7,"robust-subtract":8,"robust-sum":9,"two-product":14}],7:[function(t,e,r){"use strict";var n=t("two-product"),i=t("two-sum");e.exports=function(t,e){var r=t.length;if(1===r){var o=n(t[0],e);return o[0]?o:[o[1]]}var f=new Array(2*r),u=[.1,.1],l=[.1,.1],h=0;n(t[0],e,u),u[0]&&(f[h++]=u[0]);for(var s=1;s<r;++s){n(t[s],e,l);var a=u[1];i(a,l[0],u),u[0]&&(f[h++]=u[0]);var c=l[1],g=u[1],v=c+g,p=g-(v-c);u[1]=v,p&&(f[h++]=p)}u[1]&&(f[h++]=u[1]);0===h&&(f[h++]=0);return f.length=h,f}},{"two-product":14,"two-sum":15}],8:[function(t,e,r){"use strict";e.exports=function(t,e){var r=0|t.length,n=0|e.length;if(1===r&&1===n)return function(t,e){var r=t+e,n=r-t,i=t-(r-n)+(e-n);if(i)return[i,r];return[r]}(t[0],-e[0]);var i,o,f=new Array(r+n),u=0,l=0,h=0,s=Math.abs,a=t[l],c=s(a),g=-e[h],v=s(g);c<v?(o=a,(l+=1)<r&&(a=t[l],c=s(a))):(o=g,(h+=1)<n&&(g=-e[h],v=s(g)));l<r&&c<v||h>=n?(i=a,(l+=1)<r&&(a=t[l],c=s(a))):(i=g,(h+=1)<n&&(g=-e[h],v=s(g)));var p,_,d=i+o,y=d-i,x=o-y,w=x,b=d;for(;l<r&&h<n;)c<v?(i=a,(l+=1)<r&&(a=t[l],c=s(a))):(i=g,(h+=1)<n&&(g=-e[h],v=s(g))),(x=(o=w)-(y=(d=i+o)-i))&&(f[u++]=x),w=b-((p=b+d)-(_=p-b))+(d-_),b=p;for(;l<r;)(x=(o=w)-(y=(d=(i=a)+o)-i))&&(f[u++]=x),w=b-((p=b+d)-(_=p-b))+(d-_),b=p,(l+=1)<r&&(a=t[l]);for(;h<n;)(x=(o=w)-(y=(d=(i=g)+o)-i))&&(f[u++]=x),w=b-((p=b+d)-(_=p-b))+(d-_),b=p,(h+=1)<n&&(g=-e[h]);w&&(f[u++]=w);b&&(f[u++]=b);u||(f[u++]=0);return f.length=u,f}},{}],9:[function(t,e,r){"use strict";e.exports=function(t,e){var r=0|t.length,n=0|e.length;if(1===r&&1===n)return function(t,e){var r=t+e,n=r-t,i=t-(r-n)+(e-n);if(i)return[i,r];return[r]}(t[0],e[0]);var i,o,f=new Array(r+n),u=0,l=0,h=0,s=Math.abs,a=t[l],c=s(a),g=e[h],v=s(g);c<v?(o=a,(l+=1)<r&&(a=t[l],c=s(a))):(o=g,(h+=1)<n&&(g=e[h],v=s(g)));l<r&&c<v||h>=n?(i=a,(l+=1)<r&&(a=t[l],c=s(a))):(i=g,(h+=1)<n&&(g=e[h],v=s(g)));var p,_,d=i+o,y=d-i,x=o-y,w=x,b=d;for(;l<r&&h<n;)c<v?(i=a,(l+=1)<r&&(a=t[l],c=s(a))):(i=g,(h+=1)<n&&(g=e[h],v=s(g))),(x=(o=w)-(y=(d=i+o)-i))&&(f[u++]=x),w=b-((p=b+d)-(_=p-b))+(d-_),b=p;for(;l<r;)(x=(o=w)-(y=(d=(i=a)+o)-i))&&(f[u++]=x),w=b-((p=b+d)-(_=p-b))+(d-_),b=p,(l+=1)<r&&(a=t[l]);for(;h<n;)(x=(o=w)-(y=(d=(i=g)+o)-i))&&(f[u++]=x),w=b-((p=b+d)-(_=p-b))+(d-_),b=p,(h+=1)<n&&(g=e[h]);w&&(f[u++]=w);b&&(f[u++]=b);u||(f[u++]=0);return f.length=u,f}},{}],10:[function(t,e,r){function n(t,e,r,n,i,o,f,u){if(4===arguments.length){var l=t,h=e,s=r,a=n;l.length&&2===l.length?(t=l[0],e=l[1],r=h[0],n=h[1],i=s[0],o=s[1],f=a[0],u=a[1]):(t=l.x,e=l.y,r=h.x,n=h.y,i=s.x,o=s.y,f=a.x,u=a.y)}var c,g,v,p,_,d,y,x,w,b,m;if(b=(c=n-e)*f+(v=t-r)*u+(_=r*e-t*n),!(0!==(w=c*i+v*o+_)&&0!==b&&(w>=0&&b>=0||w<0&&b<0)||(x=(g=u-o)*r+(p=i-f)*n+(d=f*o-i*u),0!==(y=g*t+p*e+d)&&0!==x&&(y>=0&&x>=0||y<0&&x<0))))return 0===(m=c*p-g*v)||(m<0?-m/2:m/2,[(v*d-p*_)/m,(g*_-c*d)/m])}void 0!==e&&e.exports&&(e.exports=n),"undefined"!=typeof window&&(window.segseg=window.segseg||n)},{}],11:[function(t,e,r){"use strict";e.exports=function(t){return t<0?-1:t>0?1:0}},{}],12:[function(t,e,r){"use strict";e.exports=function(t,e){var r,o,f,u;if(e[0][0]<e[1][0])r=e[0],o=e[1];else{if(!(e[0][0]>e[1][0]))return i(e,t);r=e[1],o=e[0]}if(t[0][0]<t[1][0])f=t[0],u=t[1];else{if(!(t[0][0]>t[1][0]))return-i(t,e);f=t[1],u=t[0]}var l=n(r,o,u),h=n(r,o,f);if(l<0){if(h<=0)return l}else if(l>0){if(h>=0)return l}else if(h)return h;if(l=n(u,f,o),h=n(u,f,r),l<0){if(h<=0)return l}else if(l>0){if(h>=0)return l}else if(h)return h;return o[0]-u[0]};var n=t("robust-orientation");function i(t,e){var r,i,o,f;if(e[0][0]<e[1][0])r=e[0],i=e[1];else{if(!(e[0][0]>e[1][0])){var u=Math.min(t[0][1],t[1][1]),l=Math.max(t[0][1],t[1][1]),h=Math.min(e[0][1],e[1][1]),s=Math.max(e[0][1],e[1][1]);return l<h?l-h:u>s?u-s:l-s}r=e[1],i=e[0]}t[0][1]<t[1][1]?(o=t[0],f=t[1]):(o=t[1],f=t[0]);var a=n(i,r,o);return a||((a=n(i,r,f))||f-i)}},{"robust-orientation":6}],13:[function(t,e,r){"use strict";e.exports=function(t){for(var e=t.length,r=2*e,n=new Array(r),o=0;o<e;++o){var l=t[o],h=l[0][0]<l[1][0];n[2*o]=new a(l[0][0],l,h,o),n[2*o+1]=new a(l[1][0],l,!h,o)}n.sort((function(t,e){var r=t.x-e.x;return r||((r=t.create-e.create)||Math.min(t.segment[0][1],t.segment[1][1])-Math.min(e.segment[0][1],e.segment[1][1]))}));var c=i(f),g=[],v=[],p=[];for(o=0;o<r;){for(var _=n[o].x,d=[];o<r;){var y=n[o];if(y.x!==_)break;o+=1,y.segment[0][0]===y.x&&y.segment[1][0]===y.x?y.create&&(y.segment[0][1]<y.segment[1][1]?(d.push(new s(y.segment[0][1],y.index,!0,!0)),d.push(new s(y.segment[1][1],y.index,!1,!1))):(d.push(new s(y.segment[1][1],y.index,!0,!1)),d.push(new s(y.segment[0][1],y.index,!1,!0)))):c=y.create?c.insert(y.segment,y.index):c.remove(y.segment)}g.push(c.root),v.push(_),p.push(d)}return new u(g,v,p)};var n=t("binary-search-bounds"),i=t("functional-red-black-tree"),o=t("robust-orientation"),f=t("./lib/order-segments");function u(t,e,r){this.slabs=t,this.coordinates=e,this.horizontal=r}function l(t,e){return t.y-e}function h(t,e){for(var r=null;t;){var n,i,f=t.key;f[0][0]<f[1][0]?(n=f[0],i=f[1]):(n=f[1],i=f[0]);var u=o(n,i,e);if(u<0)t=t.left;else if(u>0)if(e[0]!==f[1][0])r=t,t=t.right;else{if(l=h(t.right,e))return l;t=t.left}else{if(e[0]!==f[1][0])return t;var l;if(l=h(t.right,e))return l;t=t.left}}return r}function s(t,e,r,n){this.y=t,this.index=e,this.start=r,this.closed=n}function a(t,e,r,n){this.x=t,this.segment=e,this.create=r,this.index=n}u.prototype.castUp=function(t){var e=n.le(this.coordinates,t[0]);if(e<0)return-1;this.slabs[e];var r=h(this.slabs[e],t),i=-1;if(r&&(i=r.value),this.coordinates[e]===t[0]){var u=null;if(r&&(u=r.key),e>0){var s=h(this.slabs[e-1],t);s&&(u?f(s.key,u)>0&&(u=s.key,i=s.value):(i=s.value,u=s.key))}var a=this.horizontal[e];if(a.length>0){var c=n.ge(a,t[1],l);if(c<a.length){var g=a[c];if(t[1]===g.y){if(g.closed)return g.index;for(;c<a.length-1&&a[c+1].y===t[1];)if((g=a[c+=1]).closed)return g.index;if(g.y===t[1]&&!g.start){if((c+=1)>=a.length)return i;g=a[c]}}if(g.start)if(u){var v=o(u[0],u[1],[t[0],g.y]);u[0][0]>u[1][0]&&(v=-v),v>0&&(i=g.index)}else i=g.index;else g.y!==t[1]&&(i=g.index)}}}return i}},{"./lib/order-segments":12,"binary-search-bounds":3,"functional-red-black-tree":4,"robust-orientation":6}],14:[function(t,e,r){"use strict";e.exports=function(t,e,r){var i=t*e,o=n*t,f=o-(o-t),u=t-f,l=n*e,h=l-(l-e),s=e-h,a=u*s-(i-f*h-u*h-f*s);if(r)return r[0]=a,r[1]=i,r;return[a,i]};var n=+(Math.pow(2,27)+1)},{}],15:[function(t,e,r){"use strict";e.exports=function(t,e,r){var n=t+e,i=n-t,o=e-i,f=t-(n-i);if(r)return r[0]=f+o,r[1]=n,r;return[f+o,n]}},{}]},{},[1])(1)}));